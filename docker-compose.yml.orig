graylog-mongo:
  image: "mongo:3"
  volumes:
    - /graylog/data/mongo:/data/db
graylog-elasticsearch:
  image: "elasticsearch:6"
  command: "elasticsearch -Des.cluster.name='graylog'"
  volumes:
    - /graylog/data/elasticsearch:/usr/share/elasticsearch/data
graylog-main:
  image: graylog/graylog:3.1
  volumes:
    - /graylog/data/journal:/usr/share/graylog/data/journal
#    - /graylog/config:/usr/share/graylog/data/config   # Don't need this, can just use some basic environment variables to set configuration as below.
    - /graylog/plugin/ASDASD:/usr/share/graylog/plugin/ASDASD # link to single plugins - might be needed for the content pack
  environment:
    GRAYLOG_PASSWORD_SECRET: somepasswordpepper
    GRAYLOG_ROOT_PASSWORD_SHA2: 8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918
    GRAYLOG_HTTP_EXTERNAL_URI: "http://127.0.0.1:9000/"
  links:
    - graylog-mongo:mongo
    - graylog-elasticsearch:elasticsearch
  depends_on:
    - graylog-mongo
    - graylog-elasticsearch
  ports:
    - "9000:9000"
    - "12900:12900"
    - "12201:12201"
    - "12201:12201/udp"
    - "5140:5140"
    - "5140:5140/udp"
